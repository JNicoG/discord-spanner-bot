@startuml
actor User
participant Discord
participant Bot
participant Controller
participant SlashDispatcher
participant KeenHandler
participant QueueService
participant CheckInService
participant Repository
participant Database

User -> Discord: /keen
Discord -> Bot: Send Interaction
Bot -> Controller: receiveInteraction()
Controller -> SlashDispatcher: dispatch()
SlashDispatcher -> KeenHandler: handleCommand(context)
KeenHandler -> QueueService: joinQueue(userId, channelId)
QueueService --> KeenHandler: outcome
alt if queue reaches threshold
  KeenHandler -> CheckInService: startCheckIn(channelId)
  CheckInService -> Repository: createCheckInSession(...)
  Repository -> Database: INSERT checkin_session
  CheckInService --> KeenHandler: sessionStarted
  KeenHandler -> Bot: respond with check-in started message
else
  KeenHandler -> Bot: respond with queued confirmation
end

@enduml
