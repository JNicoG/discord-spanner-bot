<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="757px" preserveAspectRatio="none" style="width:1021px;height:757px;background:#FFFFFF;" version="1.1" viewBox="0 0 1021 757" width="1021px" zoomAndPan="magnify"><title>Discord Spanner Bot &#8212; High Level Architecture</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="372.3945" x="317.4892" y="22.9951">Discord Spanner Bot &#8212; High Level Architecture</text></g><!--cluster Bot Application--><g class="cluster" data-qualified-name="Bot Application" data-source-line="5" id="ent0002"><path d="M8.5,43.2969 L130.6533,43.2969 A3.75,3.75 0 0 1 133.1533,45.7969 L140.1533,65.5938 L885.5,65.5938 A2.5,2.5 0 0 1 888,68.0938 L888,747.9669 A2.5,2.5 0 0 1 885.5,750.4669 L8.5,750.4669 A2.5,2.5 0 0 1 6,747.9669 L6,45.7969 A2.5,2.5 0 0 1 8.5,43.2969" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="140.1533" y1="65.5938" y2="65.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="121.1533" x="10" y="58.292">Bot Application</text></g><!--entity Controller--><g class="entity" data-qualified-name="Bot Application.Controller" data-source-line="6" id="ent0003"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.1484" x="318.93" y="78.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162.1484" x="328.93" y="101.292">DiscordEventController</text></g><!--entity SlashDispatcher--><g class="entity" data-qualified-name="Bot Application.SlashDispatcher" data-source-line="7" id="ent0004"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="205.3359" x="108.33" y="191.5869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185.3359" x="118.33" y="214.582">SlashCommandDispatcher</text></g><!--entity ButtonDispatcher--><g class="entity" data-qualified-name="Bot Application.ButtonDispatcher" data-source-line="8" id="ent0005"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.7529" x="348.62" y="191.5869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.7529" x="358.62" y="214.582">ButtonDispatcher</text></g><!--entity CommandHandlers--><g class="entity" data-qualified-name="Bot Application.CommandHandlers" data-source-line="9" id="ent0006"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="331.7666" x="305.12" y="304.8869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.8242" x="315.12" y="327.882">Command Handlers</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="311.7666" x="315.12" y="344.1789">(e.g. Keen, Spanners, Unkeen, Leaderboard)</text></g><!--entity Services--><g class="entity" data-qualified-name="Bot Application.Services" data-source-line="10" id="ent0007"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="611.3975" x="260.3" y="434.4869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.0352" x="270.3" y="457.482">Services</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="591.3975" x="270.3" y="473.7789">(QueueService, SpannerService, CheckInService, LeaderboardService, AuditService)</text></g><!--entity Repository--><g class="entity" data-qualified-name="Bot Application.Repository" data-source-line="11" id="ent0008"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="285.1523" x="505.42" y="564.0769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.584" x="515.42" y="587.072">Repositories</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="265.1523" x="515.42" y="603.3689">(SpannerRepository, AuditRepository)</text></g><!--entity LeaderboardReactionDispatcher--><g class="entity" data-qualified-name="Bot Application.LeaderboardReactionDispatcher" data-source-line="12" id="ent0009"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="246.2148" x="525.89" y="191.5869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="226.2148" x="535.89" y="214.582">LeaderboardReactionDispatcher</text></g><!--entity NotificationService--><g class="entity" data-qualified-name="Bot Application.NotificationService" data-source-line="13" id="ent0010"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152.0703" x="187.96" y="572.2269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.0703" x="197.96" y="595.222">NotificationService</text></g><!--entity MessageFormatter--><g class="entity" data-qualified-name="Bot Application.MessageFormatter" data-source-line="14" id="ent0011"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.0391" x="22.48" y="442.6269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.0391" x="32.48" y="465.622">MessageFormatterService</text></g><!--entity MessageGateway--><g class="entity" data-qualified-name="Bot Application.MessageGateway" data-source-line="15" id="ent0012"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="305.0928" x="111.45" y="698.1669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285.0928" x="121.45" y="721.162">Message Gateway / InteractionResponse</text></g><!--entity PostgresDB--><g class="entity" data-qualified-name="PostgresDB" data-source-line="18" id="ent0013"><path d="M903.62,703.6669 C903.62,693.6669 953.9965,693.6669 953.9965,693.6669 C953.9965,693.6669 1004.3729,693.6669 1004.3729,703.6669 L1004.3729,728.9638 C1004.3729,738.9638 953.9965,738.9638 953.9965,738.9638 C953.9965,738.9638 903.62,738.9638 903.62,728.9638 L903.62,703.6669" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M903.62,703.6669 C903.62,713.6669 953.9965,713.6669 953.9965,713.6669 C953.9965,713.6669 1004.3729,713.6669 1004.3729,703.6669" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="913.62" y="730.662">PostgreSQL</text></g><!--link Controller to SlashDispatcher--><g class="link" data-entity-1="ent0003" data-entity-2="ent0004" data-link-type="dependency" data-source-line="20" id="lnk14"><path d="M318.73,111.5169 C294.3,118.5069 269.13,128.9569 249,144.5869 C233.56,156.5869 225.4049,171.199 219.4249,185.719" fill="none" id="Controller-to-SlashDispatcher" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="217.14,191.2669,224.2659,184.4683,219.0441,186.6436,216.8687,181.4218,217.14,191.2669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.9194" x="250" y="157.6538">route slash commands</text></g><!--link Controller to ButtonDispatcher--><g class="link" data-entity-1="ent0003" data-entity-2="ent0005" data-link-type="dependency" data-source-line="21" id="lnk15"><path d="M407.48,114.9469 C406.03,127.8869 404.88,145.9069 407,161.5869 C408.37,171.6869 409.5318,176.9464 412.2718,185.7764" fill="none" id="Controller-to-ButtonDispatcher" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="414.05,191.5069,415.203,181.7257,412.5682,186.7315,407.5624,184.0967,414.05,191.5069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.8555" x="408" y="157.6538">route button interactions</text></g><!--link Controller to LeaderboardReactionDispatcher--><g class="link" data-entity-1="ent0003" data-entity-2="ent0009" data-link-type="dependency" data-source-line="22" id="lnk16"><path d="M497.99,114.9869 C523.72,122.0969 551.29,131.7569 575,144.5869 C597.43,156.7369 614.802,172.3606 628.802,186.7906" fill="none" id="Controller-to-LeaderboardReactionDispatcher" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="632.98,191.0969,629.5839,181.8521,629.4983,187.5083,623.8421,187.4227,632.98,191.0969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256.4072" x="600.54" y="157.6538">route leaderboard reaction interactions</text></g><!--link SlashDispatcher to CommandHandlers--><g class="link" data-entity-1="ent0004" data-entity-2="ent0006" data-link-type="dependency" data-source-line="23" id="lnk17"><path d="M232.71,228.1369 C251.11,242.2269 278.62,261.8169 305,274.8869 C328.13,286.3569 348.5181,294.4088 373.0181,302.5788" fill="none" id="SlashDispatcher-to-CommandHandlers" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="378.71,304.4769,371.4376,297.8352,373.9668,302.8952,368.9068,305.4244,378.71,304.4769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3057" x="306" y="270.9538">dispatch to handler</text></g><!--link ButtonDispatcher to CommandHandlers--><g class="link" data-entity-1="ent0005" data-entity-2="ent0006" data-link-type="dependency" data-source-line="24" id="lnk18"><path d="M427.53,228.3669 C436.11,248.4869 447.8834,276.049 457.6934,299.019" fill="none" id="ButtonDispatcher-to-CommandHandlers" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="460.05,304.5369,460.1937,294.6891,458.0862,299.9387,452.8366,297.8311,460.05,304.5369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3057" x="448.03" y="270.9538">dispatch to handler</text></g><!--link LeaderboardReactionDispatcher to CommandHandlers--><g class="link" data-entity-1="ent0009" data-entity-2="ent0006" data-link-type="dependency" data-source-line="25" id="lnk19"><path d="M633.73,228.3569 C621.1,242.1969 602.19,261.3369 583,274.8869 C567.24,286.0269 554.2808,293.4626 537.0708,301.8726" fill="none" id="LeaderboardReactionDispatcher-to-CommandHandlers" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="531.68,304.5069,541.5224,304.1493,536.1723,302.3116,538.01,296.9616,531.68,304.5069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3057" x="603.69" y="270.9538">dispatch to handler</text></g><!--link CommandHandlers to Services--><g class="link" data-entity-1="ent0006" data-entity-2="ent0007" data-link-type="dependency" data-source-line="26" id="lnk20"><path d="M490,357.6969 C506.57,379.9569 526.8966,407.2544 543.4566,429.4944" fill="none" id="CommandHandlers-to-Services" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="547.04,434.3069,544.8733,424.6993,544.0539,430.2965,538.4567,429.4771,547.04,434.3069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.6279" x="525.19" y="400.5538">call domain services</text></g><!--link Services to Repository--><g class="link" data-entity-1="ent0007" data-entity-2="ent0008" data-link-type="dependency" data-source-line="27" id="lnk21"><path d="M582.4,487.2969 C596.7,509.5469 614.0966,536.6191 628.3866,558.8591" fill="none" id="Services-to-Repository" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="631.63,563.9069,630.1301,554.1729,628.9272,559.7004,623.3997,558.4974,631.63,563.9069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2046" x="612.91" y="530.1438">persist/read data</text></g><!--link Repository to PostgresDB--><g class="link" data-entity-1="ent0008" data-entity-2="ent0013" data-link-type="dependency" data-source-line="28" id="lnk22"><path d="M711.4,617.0569 C768.3,640.0969 845.1489,671.2243 897.7589,692.5343" fill="none" id="Repository-to-PostgresDB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="903.32,694.7869,896.48,687.7006,898.6857,692.9097,893.4766,695.1154,903.32,694.7869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.5884" x="820.32" y="659.7338">SQL/ORM</text></g><!--link Services to NotificationService--><g class="link" data-entity-1="ent0007" data-entity-2="ent0010" data-link-type="dependency" data-source-line="30" id="lnk23"><path d="M505.25,487.4469 C446,512.4769 362.987,547.5519 311.267,569.4019" fill="none" id="Services-to-NotificationService" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="305.74,571.7369,315.5872,571.9191,310.3458,569.7911,312.4739,564.5497,305.74,571.7369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.9102" x="434.08" y="530.1438">publish events</text></g><!--link MessageFormatter to NotificationService--><g class="link" data-entity-1="ent0011" data-entity-2="ent0010" data-link-type="dependency" data-source-line="31" id="lnk24"><path d="M143.17,479.2569 C169.98,503.6869 213.935,543.7457 240.625,568.0657" fill="none" id="MessageFormatter-to-NotificationService" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="245.06,572.1069,241.1016,563.0885,241.3642,568.7392,235.7134,569.0018,245.06,572.1069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.9312" x="203.38" y="530.1438">format messages</text></g><!--link NotificationService to MessageGateway--><g class="link" data-entity-1="ent0010" data-entity-2="ent0012" data-link-type="dependency" data-source-line="32" id="lnk25"><path d="M264,608.8669 C264,632.4869 264,668.3369 264,691.9169" fill="none" id="NotificationService-to-MessageGateway" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="264,697.9169,268,688.9169,264,692.9169,260,688.9169,264,697.9169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.499" x="265" y="659.7338">send responses</text></g><?plantuml-src ZLH1Rjim4Bpp5GkVMY29xpaKi9ss2UAqZOtUUbbJ6uimHGhaoeLH5EWZ-iA-fAH4InPZ6BaOsDcPsHKvjDyfKwF32gIjQcl8y9eFci2HP3HRJKAmuW3SAI-jAs1Tep7aO6uP_ltv2_TgMyAIzgHXvcIfE0WR5sGroXrk2IQHEQjhhIIoicO2lmGCus2Id3_kGxMmXftLcjm4qCDGZYLhZRvSsAf2KmHvZIpB96bR0pRMpHjcQp953eubQGhSXv-mX_zXtj7DzWOUYSpLyJJy5NmtknPP4XRaDXPTyJvzGsjmr6SVGcwl94NNvuOQIdLltDUBakJkmVJroPWUcpM5ubHriu_suw4hggrNR9rg1wTHFNf8JWFGcGtrsEvabHMXZ7USdV15njZiYsNrafAIjcyjpk1ZuHDv7-BsoReAcVkJQyLvxwmIFYFJJpp051vC87LxhiW7dX_v9ABuBKI1Z1lq8UNVhEUje_NpigMcqj_DXHXI3DVN7_A4mYqusp21ZtXSBCR5vweyfRriqpP03Jk_qbuy_zv83wpm_3lQs3RVF7fdyGvkHI80MoWxMBpQ_ktIoyk_tITdjLUHtaUGIDGQ2bkXCk2FpwRlH_AG_q2lWuNoF0q7LK1CWJXfH_OGWC0EgPX-NJs9iU6PJ4VdPgDL20B5_qClyknUKBwq7AWwXHVdM54zZd4GUZBnohkaU_4V?></g></svg>